{% extends 'students/base.html' %}

{% block content %}
<div class="card">
    <div class="card-header bg-secondary text-white">
        <h3 class="mb-0">Histórico de Matrículas</h3>
    </div>
    
    <div class="card-body">
        <table class="table table-bordered align-middle">
            <thead>
                <tr>
                    <th>Aluno</th>
                    <th>Curso</th>
                    <th>Data</th>
                    <th>Status</th>
                    <th class="text-center">Financeiro</th>
                </tr>
            </thead>
            <tbody>
            {% for enrollment in enrollments %}
                <tr>
                    <td>{{ enrollment.student.first_name }} {{ enrollment.student.last_name }}</td>
                    <td>{{ enrollment.course.name }}</td>
                    <td>{{ enrollment.enrollment_date|date:"d/m/Y" }}</td>
                    <td>
                        {% if enrollment.active %}
                            <span class="badge bg-success">Ativo</span>
                        {% else %}
                            <span class="badge bg-secondary">Inativo</span>
                        {% endif %}
                    </td>
                    <td class="text-center">
                        {% if enrollment.is_free %}
                            <span class="badge bg-success w-100 p-2">GRÁTIS</span>
                        {% else %}
                            <span class="badge bg-light text-dark border w-100 p-2">Pago</span>
                        {% endif %}
                    </td>
                </tr>
            {% empty %}
                <tr><td colspan="5" class="text-center">Nenhuma matrícula registrada.</td></tr>
            {% endfor %}
            </tbody>
        </table>
        
        <div class="mt-3">
            <a href="{% url 'students:list' %}" class="btn btn-outline-secondary">Voltar para Alunos</a>
        </div>
    </div>
</div>
{% endblock %}